# Plan 16-01: CLI Rebrand

<metadata>
phase: 16-cli-rebrand
plan: 01
depends_on: [15-01]
</metadata>

<objective>
Rename the CLI binary from "cancer" to "ferro", update all user-facing messages, command documentation, and generated code templates to reference "Ferro" instead of "Cancer".
</objective>

<context>
Phase 15 renamed all supporting crates including ferro-cli (the package). However:
- The binary is still named "cancer" (Cargo.toml [[bin]] section)
- main.rs has `#[command(name = "cancer")]`
- All command files reference "Cancer project" in error messages (~25 files)
- templates/mod.rs contains ~150 "cancer" references in generated code templates
- Template files (.tpl) reference cancer in env vars, imports, and comments

The CLI has two categories of cancer references:
1. **CLI itself**: Binary name, command help text, error messages
2. **Generated code**: Templates that scaffold new projects use `use cancer::*` imports

For category 2, we need to update templates to use `use ferro::*` since new projects will depend on the ferro crate directly (not via alias).
</context>

<tasks>
<task id="1">
<title>Rename CLI binary and update main.rs</title>
<why>The binary name is the primary user-facing change</why>
<what>
1. Update ferro-cli/Cargo.toml:
   - Change `[[bin]] name = "cancer"` to `name = "ferro"`

2. Update ferro-cli/src/main.rs:
   - Line 8: Change `#[command(name = "cancer")]` to `#[command(name = "ferro")]`
   - Line 9: Change "Cancer web applications" to "Ferro web applications"
   - Line 17: Change "Create a new Cancer project" to "Create a new Ferro project"
</what>
<files>
- ferro-cli/Cargo.toml
- ferro-cli/src/main.rs
</files>
<verify>
```bash
# Verify binary name changed
grep 'name = "ferro"' ferro-cli/Cargo.toml | head -2

# Verify main.rs updated
grep -n 'command(name = "ferro")' ferro-cli/src/main.rs
grep -n 'Ferro' ferro-cli/src/main.rs | head -5

# Build CLI
cargo build -p ferro-cli
```
</verify>
<commit>refactor(16-01): rename CLI binary from cancer to ferro</commit>
</task>

<task id="2">
<title>Update command file error messages and references</title>
<why>User-facing error messages should reference "Ferro" not "Cancer"</why>
<what>
Update all command files in ferro-cli/src/commands/ to change:
- "Cancer project" → "Ferro project"
- "cancer " (command references) → "ferro "
- "Cancer framework" → "Ferro framework"
- "cancer_app" defaults → "ferro_app"
- `cancer_mcp::` → `ferro_mcp::`

Files requiring updates (26 files with cancer references):
- boost_install.rs: MCP config, guidelines, binary lookup
- docker_compose.rs: Default app names
- generate_types.rs: Comment headers, project validation
- generate_routes.rs: Comment headers, project validation
- make_*.rs files: Error messages about project directory
- migrate*.rs: Error messages
- mcp.rs: Server startup message, cancer_mcp import
- new.rs: Welcome message, default names, serve command hint
- serve.rs: Startup message, validation function
- db_sync.rs: Error messages
</what>
<files>
- ferro-cli/src/commands/*.rs (26 files)
</files>
<verify>
```bash
# Count remaining cancer references in commands (should be 0 except import alias)
grep -r "Cancer" ferro-cli/src/commands/ | grep -v "cancer_mcp" | wc -l

# Verify Ferro references exist
grep -r "Ferro project" ferro-cli/src/commands/ | wc -l

# Cargo check
cargo check -p ferro-cli
```
</verify>
<commit>refactor(16-01): update CLI command messages from Cancer to Ferro</commit>
</task>

<task id="3">
<title>Update templates/mod.rs generated code templates</title>
<why>New projects should use ferro imports, not cancer aliases</why>
<what>
Update ferro-cli/src/templates/mod.rs to change all generated code:

1. Import statements:
   - `use cancer::` → `use ferro::`
   - `use cancer_events::` → `use ferro_events::`
   - `use cancer_queue::` → `use ferro_queue::`
   - `use cancer_notifications::` → `use ferro_notifications::`

2. Framework references in generated comments:
   - "Cancer Framework" → "Ferro Framework"
   - "cancer make:" → "ferro make:"
   - "cancer serve" → "ferro serve"
   - "cancer migrate" → "ferro migrate"
   - "cancer db:sync" → "ferro db:sync"
   - "cancer generate-types" → "ferro generate-types"
   - "cancer mcp" → "ferro mcp"
   - "cancer schedule:" → "ferro schedule:"

3. Function/variable names:
   - `cancer_guidelines_template()` → `ferro_guidelines_template()`
   - `claude_md_cancer_section()` → `claude_md_ferro_section()`
   - File output: `cancer.md` → `ferro.md`

4. Generated struct/impl references:
   - `CancerModel` derive → `FerroModel` derive (Note: This is the macro name, needs consistency check)
   - `cancer::auth::Authenticatable` → `ferro::auth::Authenticatable`
   - `cancer::FrameworkError` → `ferro::FrameworkError`
   - `cancer::error_response!` → `ferro::error_response!`

5. Update tests at end of file:
   - `test_cancer_guidelines_template_not_empty` → `test_ferro_guidelines_template_not_empty`
   - Update assertions to check for "Ferro Framework"
</what>
<files>
- ferro-cli/src/templates/mod.rs
</files>
<verify>
```bash
# Count remaining cancer references (should be 0)
grep -c "cancer" ferro-cli/src/templates/mod.rs || echo "0"

# Verify ferro references
grep -c "ferro" ferro-cli/src/templates/mod.rs

# Run template tests
cargo test -p ferro-cli templates::
```
</verify>
<commit>refactor(16-01): update generated code templates from Cancer to Ferro</commit>
</task>

<task id="4">
<title>Update template files (.tpl)</title>
<why>Template files generate actual project code and must use ferro imports</why>
<what>
Update all .tpl files in ferro-cli/src/templates/files/:

1. Backend templates (ferro-cli/src/templates/files/backend/):
   - Cargo.toml.tpl: Change `cancer = { package = "cancer-rs"...}` to `ferro = { git = "..." }`
   - main.rs.tpl: `use cancer::` → `use ferro::`
   - config/*.tpl: All cancer imports
   - controllers/*.tpl: All cancer imports
   - middleware/*.tpl: All cancer imports
   - models/*.tpl: All cancer imports and FrameworkError references
   - migrations/*.tpl: `use cancer::migration::` → `use ferro::migration::`
   - Other *.tpl files with cancer references

2. Root templates (ferro-cli/src/templates/files/root/):
   - env.tpl: `cancer_session` → `ferro_session`, `cancer_cache_` → `ferro_cache_`
   - env.example.tpl: "cancer serve" → "ferro serve"

3. Docker templates (ferro-cli/src/templates/files/docker/):
   - docker-compose.yml.tpl: Default user/password/db names cancer → ferro

4. Frontend templates (ferro-cli/src/templates/files/frontend/):
   - inertia-props.ts.tpl: "cancer generate-types" → "ferro generate-types"
</what>
<files>
- ferro-cli/src/templates/files/**/*.tpl (~26 files)
</files>
<verify>
```bash
# Count remaining cancer references in templates (should be 0)
grep -r "cancer" ferro-cli/src/templates/files/ | wc -l

# Verify ferro references exist
grep -r "ferro" ferro-cli/src/templates/files/ | wc -l

# Full test suite
cargo test -p ferro-cli
```
</verify>
<commit>refactor(16-01): update template files from Cancer to Ferro references</commit>
</task>

<task id="5">
<title>Update boost_install command specifics</title>
<why>boost_install has special logic for binary discovery and config generation</why>
<what>
Detailed updates for ferro-cli/src/commands/boost_install.rs:

1. MCP config generation (generate_mcp_config function):
   - Change `"cancer": {` to `"ferro": {` in JSON output
   - Update `cancer_command` variable to `ferro_command`

2. Binary discovery (find_cancer_binary function):
   - Rename function to `find_ferro_binary`
   - Change `which cancer` to `which ferro`
   - Change `where cancer` to `where ferro`
   - Update fallback from `"cancer"` to `"ferro"`

3. Guidelines file paths:
   - `cancer.md` → `ferro.md`
   - `cancer_md_path` → `ferro_md_path`

4. User messages:
   - "Cancer MCP tools" → "Ferro MCP tools"
   - "Cancer framework guidelines" → "Ferro framework guidelines"
</what>
<files>
- ferro-cli/src/commands/boost_install.rs
</files>
<verify>
```bash
# Verify no cancer references remain
grep -c "cancer" ferro-cli/src/commands/boost_install.rs || echo "0"

# Verify ferro binary lookup
grep "find_ferro_binary" ferro-cli/src/commands/boost_install.rs

# Verify MCP config uses ferro
grep '"ferro":' ferro-cli/src/commands/boost_install.rs
```
</verify>
<commit>refactor(16-01): update boost_install for ferro binary and config</commit>
</task>

<task id="6">
<title>Full CLI verification and cleanup</title>
<why>Ensure all references updated and CLI functions correctly</why>
<what>
1. Search for any remaining cancer references:
   ```bash
   grep -r "cancer" ferro-cli/src/ | grep -v "cancer_mcp"
   ```
   Note: cancer_mcp import alias is expected until Phase 17

2. Build and test:
   ```bash
   cargo build -p ferro-cli
   cargo test -p ferro-cli
   ```

3. Verify binary name:
   ```bash
   cargo build -p ferro-cli --release
   ls target/release/ferro
   ```

4. Test key commands work:
   ```bash
   ./target/release/ferro --help
   ```

Fix any issues found during verification.
</what>
<files>
- (any files requiring fixes)
</files>
<verify>
```bash
# Final cancer reference count (only cancer_mcp import should remain)
grep -r "cancer" ferro-cli/src/ | grep -v "cancer_mcp" | wc -l  # Should be 0

# Full test suite passes
cargo test -p ferro-cli

# Binary exists with correct name
cargo build -p ferro-cli && ls -la target/debug/ferro
```
</verify>
<commit>refactor(16-01): verify CLI rebrand complete</commit>
</task>
</tasks>

<notes>
- The cancer_mcp import alias will remain until Phase 17 (MCP Server Rebrand)
- CancerModel macro name will be addressed as part of framework internals (separate concern)
- New projects created with `ferro new` will use `use ferro::*` imports directly
</notes>

<summary_template>
---
phase: 16-cli-rebrand
plan: 01
subsystem: cli
tags: [cli, rebrand, ferro, templates]

# Dependency graph
requires:
  - phase: 15-supporting-crates-rename
    provides: All supporting crates renamed to ferro-*
provides:
  - CLI binary renamed from "cancer" to "ferro"
  - All user-facing messages reference "Ferro"
  - Generated code templates use ferro imports
affects: [17-mcp-rebrand, 19-sample-app-migration, 20-templates-scaffolding]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Generated projects use `use ferro::*` imports directly"

key-files:
  created: []
  modified:
    - ferro-cli/Cargo.toml
    - ferro-cli/src/main.rs
    - ferro-cli/src/commands/*.rs (~26 files)
    - ferro-cli/src/templates/mod.rs
    - ferro-cli/src/templates/files/**/*.tpl (~26 files)

key-decisions: []

patterns-established:
  - "New projects scaffold with ferro imports, not aliases"

# Metrics
duration: TBD
completed: TBD
---

# Phase 16 Plan 01: CLI Rebrand Summary

**Renamed CLI binary to ferro and updated all user-facing messages and templates**

## Performance

- **Duration:** TBD
- **Started:** TBD
- **Completed:** TBD
- **Tasks:** 6
- **Files modified:** ~55 (Cargo.toml, main.rs, 26 commands, mod.rs, 26 templates)

## Accomplishments

- CLI binary renamed from "cancer" to "ferro"
- All command help text and error messages reference "Ferro"
- Generated code templates use `use ferro::*` imports
- Template files (.tpl) updated for new projects
- boost_install generates ferro MCP config

## Task Commits

1. **Task 1: Binary rename** - `TBD` (refactor)
2. **Task 2: Command messages** - `TBD` (refactor)
3. **Task 3: Template mod.rs** - `TBD` (refactor)
4. **Task 4: Template files** - `TBD` (refactor)
5. **Task 5: boost_install specifics** - `TBD` (refactor)
6. **Task 6: Verification** - `TBD` (refactor)

## Files Created/Modified

(To be filled during execution)

## Decisions Made

(To be filled during execution)

## Deviations from Plan

(To be filled during execution)

## Next Phase Readiness

- CLI fully rebranded to "ferro"
- cancer_mcp import alias remains (addressed in Phase 17)
- Ready for Phase 17: MCP Server Rebrand

---
*Phase: 16-cli-rebrand*
*Completed: TBD*
</summary_template>
