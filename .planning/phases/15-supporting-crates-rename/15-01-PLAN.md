# Plan 15-01: Supporting Crates Rename

<metadata>
phase: 15-supporting-crates-rename
plan: 01
depends_on: [14-01]
</metadata>

<objective>
Rename all 9 cancer-* crate directories to ferro-* directories, update their package names in Cargo.toml, update workspace members in root Cargo.toml, and update all dependency references in framework and CLI crates.
</objective>

<context>
Phase 14 renamed the core framework package from cancer-rs to ferro. Now we need to rename the 9 supporting crates:
- cancer-macros → ferro-macros
- cancer-events → ferro-events
- cancer-queue → ferro-queue
- cancer-notifications → ferro-notifications
- cancer-broadcast → ferro-broadcast
- cancer-storage → ferro-storage
- cancer-cache → ferro-cache
- cancer-mcp → ferro-mcp
- cancer-cli → ferro-cli

Most crates have no internal dependencies. Only cancer-cli depends on cancer-mcp.

Following the alias pattern from Phase 14, we'll keep the old import names as aliases (e.g., `cancer-macros = { path = "../ferro-macros", package = "ferro-macros" }`) for gradual migration.
</context>

<tasks>
<task id="1">
<title>Rename crate directories and update package names</title>
<why>Directory and package names are the foundation for the rest of the rename</why>
<what>
1. Rename all 9 crate directories:
   - `mv cancer-macros ferro-macros`
   - `mv cancer-events ferro-events`
   - `mv cancer-queue ferro-queue`
   - `mv cancer-notifications ferro-notifications`
   - `mv cancer-broadcast ferro-broadcast`
   - `mv cancer-storage ferro-storage`
   - `mv cancer-cache ferro-cache`
   - `mv cancer-mcp ferro-mcp`
   - `mv cancer-cli ferro-cli`

2. Update each crate's Cargo.toml package name:
   - `ferro-macros/Cargo.toml`: name = "ferro-macros"
   - `ferro-events/Cargo.toml`: name = "ferro-events"
   - `ferro-queue/Cargo.toml`: name = "ferro-queue"
   - `ferro-notifications/Cargo.toml`: name = "ferro-notifications"
   - `ferro-broadcast/Cargo.toml`: name = "ferro-broadcast"
   - `ferro-storage/Cargo.toml`: name = "ferro-storage"
   - `ferro-cache/Cargo.toml`: name = "ferro-cache"
   - `ferro-mcp/Cargo.toml`: name = "ferro-mcp"
   - `ferro-cli/Cargo.toml`: name = "ferro-cli"
</what>
<files>
- cancer-macros/ → ferro-macros/
- cancer-events/ → ferro-events/
- cancer-queue/ → ferro-queue/
- cancer-notifications/ → ferro-notifications/
- cancer-broadcast/ → ferro-broadcast/
- cancer-storage/ → ferro-storage/
- cancer-cache/ → ferro-cache/
- cancer-mcp/ → ferro-mcp/
- cancer-cli/ → ferro-cli/
- ferro-*/Cargo.toml (9 files)
</files>
<verify>
```bash
# Verify directories renamed
ls -d ferro-* | wc -l  # Should be 9
ls -d cancer-* 2>/dev/null | wc -l  # Should be 0 (only inertia-rs remains unmatched)

# Verify package names updated
grep -l 'name = "ferro-' ferro-*/Cargo.toml | wc -l  # Should be 9
```
</verify>
<commit>refactor(15-01): rename supporting crate directories and package names</commit>
</task>

<task id="2">
<title>Update workspace members and framework dependencies</title>
<why>Cargo workspace and framework must reference new directory paths</why>
<what>
1. Update root Cargo.toml workspace members:
   - Replace "cancer-cli" with "ferro-cli"
   - Replace "cancer-macros" with "ferro-macros"
   - Replace "cancer-events" with "ferro-events"
   - Replace "cancer-queue" with "ferro-queue"
   - Replace "cancer-notifications" with "ferro-notifications"
   - Replace "cancer-broadcast" with "ferro-broadcast"
   - Replace "cancer-storage" with "ferro-storage"
   - Replace "cancer-cache" with "ferro-cache"
   - Replace "cancer-mcp" with "ferro-mcp"

2. Update framework/Cargo.toml dependency paths with alias pattern:
   ```toml
   cancer-macros = { path = "../ferro-macros", package = "ferro-macros", version = "0.1" }
   cancer-events = { path = "../ferro-events", package = "ferro-events", version = "0.1" }
   cancer-queue = { path = "../ferro-queue", package = "ferro-queue", version = "0.1" }
   cancer-notifications = { path = "../ferro-notifications", package = "ferro-notifications", version = "0.1" }
   cancer-broadcast = { path = "../ferro-broadcast", package = "ferro-broadcast", version = "0.1" }
   cancer-storage = { path = "../ferro-storage", package = "ferro-storage", version = "0.1" }
   cancer-cache = { path = "../ferro-cache", package = "ferro-cache", version = "0.1" }
   ```

3. Update ferro-cli/Cargo.toml dependency on MCP:
   ```toml
   cancer-mcp = { path = "../ferro-mcp", package = "ferro-mcp" }
   ```
</what>
<files>
- Cargo.toml (root workspace)
- framework/Cargo.toml
- ferro-cli/Cargo.toml
</files>
<verify>
```bash
# Verify workspace compiles
cargo check --workspace 2>&1 | head -20

# Verify workspace members updated
grep -c "ferro-" Cargo.toml  # Should be 9

# Verify framework deps updated
grep -c 'path = "../ferro-' framework/Cargo.toml  # Should be 7
```
</verify>
<commit>refactor(15-01): update workspace members and framework dependency paths</commit>
</task>

<task id="3">
<title>Full workspace verification</title>
<why>Ensure all crates build and tests pass after directory/package renames</why>
<what>
1. Run cargo check on entire workspace
2. Run cargo test on all crates (except known failing tests)
3. Verify no broken imports or missing crates

Fix any issues found during verification.
</what>
<files>
- (any files requiring fixes)
</files>
<verify>
```bash
# Full workspace check
cargo check --workspace

# Run tests (excluding known flaky/failing tests)
cargo test --workspace --exclude cancer-storage 2>&1 | tail -30

# Verify all ferro crates exist in workspace
cargo metadata --format-version=1 | grep -o '"name":"ferro-[^"]*"' | sort -u | wc -l  # Should be 9
```
</verify>
<commit>refactor(15-01): verify workspace builds after supporting crates rename</commit>
</task>
</tasks>

<summary_template>
---
phase: 15-supporting-crates-rename
plan: 01
subsystem: infra
tags: [cargo, rust, rebrand, ferro]

# Dependency graph
requires:
  - phase: 14-core-framework-rename
    provides: Core framework renamed to ferro with alias pattern
provides:
  - All 9 supporting crates renamed from cancer-* to ferro-*
  - Workspace members updated to reference new directories
  - Framework dependencies updated with alias pattern
affects: [16-cli-rebrand, 17-mcp-rebrand, 19-sample-app-migration]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Alias pattern for all crate dependencies: `cancer-X = { path = \"../ferro-X\", package = \"ferro-X\" }`"

key-files:
  created: []
  modified:
    - Cargo.toml (root)
    - framework/Cargo.toml
    - ferro-cli/Cargo.toml
    - ferro-*/Cargo.toml (9 files)
  renamed:
    - cancer-macros/ → ferro-macros/
    - cancer-events/ → ferro-events/
    - cancer-queue/ → ferro-queue/
    - cancer-notifications/ → ferro-notifications/
    - cancer-broadcast/ → ferro-broadcast/
    - cancer-storage/ → ferro-storage/
    - cancer-cache/ → ferro-cache/
    - cancer-mcp/ → ferro-mcp/
    - cancer-cli/ → ferro-cli/

key-decisions: []

patterns-established:
  - "Consistent alias pattern across all supporting crate dependencies"

# Metrics
duration: TBD
completed: TBD
---

# Phase 15 Plan 01: Supporting Crates Rename Summary

**Renamed all 9 supporting crates from cancer-* to ferro-*, updated workspace configuration and dependency references**

## Performance

- **Duration:** TBD
- **Started:** TBD
- **Completed:** TBD
- **Tasks:** 3
- **Files modified:** 12+ (9 crate Cargo.tomls + root + framework + cli)
- **Directories renamed:** 9

## Accomplishments

- All 9 crate directories renamed from cancer-* to ferro-*
- Package names updated in all crate Cargo.toml files
- Root workspace members updated to reference new directories
- Framework dependencies updated with alias pattern for gradual migration
- CLI dependency on MCP updated with alias pattern
- Full workspace builds and tests pass

## Task Commits

1. **Task 1: Rename directories and packages** - `TBD` (refactor)
2. **Task 2: Update workspace and dependencies** - `TBD` (refactor)
3. **Task 3: Full verification** - `TBD` (refactor)

## Files Created/Modified

(To be filled during execution)

## Decisions Made

(To be filled during execution)

## Deviations from Plan

(To be filled during execution)

## Next Phase Readiness

- All supporting crates renamed to ferro-*
- Alias pattern allows existing code to continue using cancer-* imports
- Ready for Phase 16: CLI Rebrand

---
*Phase: 15-supporting-crates-rename*
*Completed: TBD*
</summary_template>
